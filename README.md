#  åŸºäº Qt çš„ C/S æ¶æ„å³æ—¶é€šè®¯è½¯ä»¶

ä¸€ä¸ªä½¿ç”¨ Qt + MySQL + Redis å®ç°çš„è·¨å¹³å°å³æ—¶é€šè®¯è½¯ä»¶ï¼ŒåŸºäº C/S æ¶æ„ï¼Œä½¿ç”¨ TCP å¥—æ¥å­—é€šä¿¡ï¼Œæ”¯æŒç”¨æˆ·è®¤è¯ã€å¤šç”¨æˆ·å®æ—¶èŠå¤©ã€æ•°æ®æŒä¹…åŒ–ã€æ¶ˆæ¯è½¬å‘ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

##  é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®åŸºäº Qt5/6 æ¡†æ¶ï¼Œä½¿ç”¨ `QTcpServer`/`QTcpSocket` å®ç°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„å®æ—¶é€šä¿¡ã€‚åç«¯é‡‡ç”¨ï¼š

- MySQLï¼šå­˜å‚¨ç”¨æˆ·æ•°æ®å’ŒèŠå¤©è®°å½•
- Redisï¼šç¼“å­˜ç”¨æˆ·çŠ¶æ€ã€æé«˜æ€§èƒ½

å®¢æˆ·ç«¯ä½¿ç”¨ SQLite æœ¬åœ°ç®¡ç†èŠå¤©è®°å½•ï¼Œå®ç°æ–­ç½‘æ¢å¤å’Œæœ¬åœ°æŸ¥è¯¢åŠŸèƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

##  é¡¹ç›®ç‰¹ç‚¹

- å¤šç”¨æˆ·æ³¨å†Œä¸ç™»å½•ç®¡ç†
- ä½¿ç”¨ MySQL å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ä¸å†å²æ•°æ®
- ä½¿ç”¨ Redis è¿›è¡Œç¼“å­˜ä¸å¿«é€Ÿå“åº”
- å®¢æˆ·ç«¯ä½¿ç”¨ SQLite è®°å½•æœ¬åœ°èŠå¤©è®°å½•
- å®æ—¶å¤šç§ç±»å‹æ¶ˆæ¯å‘é€ä¸æ¥æ”¶
- æ”¯æŒå‘é€ç¦»çº¿æ¶ˆæ¯ä»¥åŠå¤šç§æ ¼å¼æ–‡ä»¶
- æ¶ˆæ¯è®°å½•å±•ç¤º
- æ”¯æŒå±€åŸŸç½‘/å…¬ç½‘é€šä¿¡
- ä½¿ç”¨ TCP å¥—æ¥å­—é€šä¿¡ï¼ˆQTcpSocket/QTcpServerï¼‰
- æ¨¡å—åŒ–è®¾è®¡ï¼šé€šä¿¡ã€æ•°æ®åº“ã€Redis å°è£…æ¸…æ™°

## ğŸ”§ æŠ€æœ¯æ ˆ

| ç»„ä»¶     | æŠ€æœ¯è¯´æ˜                    |
| -------- | --------------------------- |
| å¼€å‘æ¡†æ¶ | Qt 6 / Qt 5ï¼ˆæ”¯æŒè·¨å¹³å°ï¼‰   |
| é€šä¿¡åè®® | è‡ªå®šä¹‰åè®®åŸºäº TCP å®ç°     |
| æ¶æ„æ¨¡å¼ | C/S æ¶æ„ï¼ˆClient / Serverï¼‰ |
| æ•°æ®å­˜å‚¨ | 	MySQLï¼ˆæŒä¹…åŒ–å­˜å‚¨ï¼‰+ Redisï¼ˆé«˜æ€§èƒ½ç¼“å­˜ï¼‰                      |
| æ„å»ºå·¥å…· | Qt Creator é¡¹ç›®æ–‡ä»¶ï¼ˆ.proï¼‰ |
| ç¬¬ä¸‰æ–¹åº“ | hiredisï¼ˆé€šè¿‡ vcpkg å®‰è£…ï¼‰    |

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ client/               # å®¢æˆ·ç«¯ä»£ç 
â”‚   â”œâ”€â”€ Core/                          # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ chathistorymanager.h/.cpp     # èŠå¤©è®°å½•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ control.h/.cpp                # æ§åˆ¶å™¨ï¼Œç»Ÿä¸€è°ƒåº¦é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ currentuser.h/.cpp           # å½“å‰ç”¨æˆ·æ•°æ®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ datatransfer.h/.cpp          # æ•°æ®ä¼ è¾“ä¸å°è£…æ¨¡å—

â”‚   â”œâ”€â”€ Delegate/                     # Qt è§†å›¾å§”æ‰˜ç±»ï¼ˆç”¨äºè‡ªå®šä¹‰åˆ—è¡¨é¡¹æ¸²æŸ“ï¼‰
â”‚   â”‚   â”œâ”€â”€ applydelegate.h/.cpp         # å¥½å‹ç”³è¯·é¡¹å§”æ‰˜
â”‚   â”‚   â”œâ”€â”€ chatdelegate.h/.cpp          # èŠå¤©æ¶ˆæ¯é¡¹å§”æ‰˜
â”‚   â”‚   â”œâ”€â”€ friendsdelegate.h/.cpp       # å¥½å‹åˆ—è¡¨é¡¹å§”æ‰˜
â”‚   â”‚   â”œâ”€â”€ messagedelegate.h/.cpp       # æ¶ˆæ¯å§”æ‰˜
â”‚   â”‚   â””â”€â”€ strangerdelegate.h/.cpp      # é™Œç”Ÿäººåˆ—è¡¨é¡¹å§”æ‰˜

â”‚   â”œâ”€â”€ Model/                        # æ•°æ®æ¨¡å‹å±‚ï¼ˆMVC ä¸­çš„ Mï¼‰
â”‚   â”‚   â”œâ”€â”€ Packet.h                    # ç½‘ç»œæ•°æ®åŒ…ç»“æ„å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ chatmodel.h/.cpp           # èŠå¤©æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ friendsmodel.h/.cpp        # å¥½å‹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ group.h                    # ç¾¤ç»„ç»“æ„
â”‚   â”‚   â”œâ”€â”€ message.h/.cpp             # æ¶ˆæ¯æ•°æ®ç»“æ„
â”‚   â”‚   â”œâ”€â”€ messagemodel.h/.cpp        # æ¶ˆæ¯åˆ—è¡¨æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ strangermodel.h/.cpp       # é™Œç”Ÿäººåˆ—è¡¨æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user.h                     # ç”¨æˆ·æ•°æ®ç»“æ„

â”‚   â”œâ”€â”€ Utils/                        # å·¥å…·ç±»ä¸è‡ªå®šä¹‰ç±»å‹
â”‚   â”‚   â””â”€â”€ CustomTypes.h                # è‡ªå®šä¹‰æ•°æ®ç±»å‹å®šä¹‰

â”‚   â”œâ”€â”€ View/                         # ç•Œé¢ç›¸å…³è§†å›¾ç»„ä»¶ï¼ˆåŒ…å«ç™»å½•ã€ä¸»ç•Œé¢ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ Components/                  # é€šç”¨ UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ avatarlabel.h/.cpp           # å¤´åƒæ§ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ confirmbox.h/.cpp            # ç¡®è®¤æç¤ºæ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ customtitlebar.h/.cpp        # è‡ªå®šä¹‰æ ‡é¢˜æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ dialogtitlebar.h/.cpp        # å¼¹çª—æ ‡é¢˜æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ onlinestatelabel.h/.cpp      # åœ¨çº¿çŠ¶æ€æ˜¾ç¤º
â”‚   â”‚   â”‚   â””â”€â”€ tipsbox.h/.cpp               # æç¤ºæ¡†ç»„ä»¶
â”‚
â”‚   â”‚   â”œâ”€â”€ Login/                      # ç™»å½•ä¸æ³¨å†Œç•Œé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ hollow_button.h/.cpp            # ç©ºå¿ƒæŒ‰é’®
â”‚   â”‚   â”‚   â”œâ”€â”€ input_box.h/.cpp                # è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ login_button.h/.cpp             # ç™»å½•æŒ‰é’®
â”‚   â”‚   â”‚   â”œâ”€â”€ login_form.h/.cpp               # ç™»å½•è¡¨å•
â”‚   â”‚   â”‚   â”œâ”€â”€ registration_form.h/.cpp        # æ³¨å†Œè¡¨å•
â”‚   â”‚   â”‚   â”œâ”€â”€ responsive_form.h/.cpp          # è‡ªé€‚åº”è¡¨å•å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ scroll_bar.h/.cpp               # è‡ªå®šä¹‰æ»šåŠ¨æ¡
â”‚   â”‚   â”‚   â””â”€â”€ transparent_transition_interface.h/.cpp # åŠ¨ç”»è¿‡æ¸¡ç•Œé¢
â”‚
â”‚   â”‚   â”œâ”€â”€ addfriends.h/.cpp          # æ·»åŠ å¥½å‹ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ creategroup.h/.cpp         # åˆ›å»ºç¾¤ç»„ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ imageviewer.h/.cpp         # å›¾ç‰‡æŸ¥çœ‹å™¨
â”‚   â”‚   â”œâ”€â”€ login.h/.cpp               # ç™»å½•å…¥å£é¡µ
â”‚   â”‚   â”œâ”€â”€ messagelistview.h/.cpp     # æ¶ˆæ¯åˆ—è¡¨è§†å›¾
â”‚   â”‚   â”œâ”€â”€ updateavatar.h/.cpp        # ä¿®æ”¹å¤´åƒé¡µé¢
â”‚   â”‚   â””â”€â”€ UserDetailView.h/.cpp      # ç”¨æˆ·è¯¦æƒ…è§†å›¾
â”‚   â”‚       â””â”€â”€ UserDetailView.ui

â”‚   â”œâ”€â”€ main.cpp                    # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ mainwindow.h/.cpp           # ä¸»çª—å£ï¼ˆèŠå¤©ä¸»ç•Œé¢ï¼‰
â”‚   â”œâ”€â”€ mainwindow.ui               # ä¸»çª—å£ UI æ–‡ä»¶

â”‚   â”œâ”€â”€ resource.qrc                # Qt èµ„æºæ–‡ä»¶ï¼ˆå›¾æ ‡/æ ·å¼ç­‰ï¼‰

â”‚   â””â”€â”€ AllChatClient.pro           # Qt å·¥ç¨‹é…ç½®æ–‡ä»¶ï¼ˆä½ æä¾›çš„å†…å®¹ï¼‰

â”œâ”€â”€ server/               # æœåŠ¡å™¨ç«¯ä»£ç 
â”‚   â”œâ”€â”€ Core/
â”‚   â”‚   â”œâ”€â”€ datatransfer.h/.cpp   # æ¶ˆæ¯æ”¶å‘æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ database.h/.cpp       # æ•°æ®åº“æ¥å£æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ redisclient.h/.cpp    # Redis æ“ä½œæ¨¡å—
â”‚   â”œâ”€â”€ server.h/.cpp             # æœåŠ¡ç«¯ä¸»é€»è¾‘
â”‚   â”œâ”€â”€ main.cpp                  # ç¨‹åºå…¥å£
â”‚   â””â”€â”€ AllChatServer.pro         # Qt å·¥ç¨‹æ–‡ä»¶
â”œâ”€â”€ docs/                 # æ–‡æ¡£èµ„æ–™ä¸æˆªå›¾
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

##  è½¯ä»¶ç•Œé¢æˆªå›¾

**ç™»é™†ç•Œé¢**

![image-20250504112315127](https://github.com/user-attachments/assets/895b1711-4106-4a1c-b9ea-23db49b5af8d)


**æ³¨å†Œç•Œé¢**

![image-20250504112338848](https://github.com/user-attachments/assets/f3914f03-7c29-40ce-ac9b-a6d2d1683b8a)


**èŠå¤©ä¸»ç•Œé¢**

![image-20250504112401557](https://github.com/user-attachments/assets/76e4f3f0-f048-438d-bb35-abd3db9cf316)


**åˆ›å»ºç¾¤èŠçª—å£**

![image-20250504112422917](https://github.com/user-attachments/assets/ebc0899b-b1d0-4f3f-a9b6-4354a63c513a)


**æ·»åŠ å¥½å‹çª—å£**

![image-20250504112730509](https://github.com/user-attachments/assets/8883479f-9d43-46c6-bf51-bef4e06e1118)


![image-20250504112839464](https://github.com/user-attachments/assets/465b566f-e025-4179-b950-3a9cc57327bd)


**ä¿®æ”¹å¤´åƒ**

![image-20250504112930225](https://github.com/user-attachments/assets/c591d108-a069-441f-b19c-f84006ac7fe6)


**å¥½å‹ç®¡ç†**

![image-20250504112955773](https://github.com/user-attachments/assets/4c836139-3c57-438b-b7d0-627c6c5ab7a3)




## ç¬¬ä¸‰æ–¹ä¾èµ–

- **hiredis**ï¼šè½»é‡çº§ C è¯­è¨€ Redis å®¢æˆ·ç«¯ï¼Œéœ€é€šè¿‡ vcpkg å®‰è£…ï¼š

```
vcpkg install hiredis
```

é…ç½®ï¼ˆå·²åœ¨ `.pro` ä¸­æ·»åŠ ï¼‰ï¼š

```
INCLUDEPATH += D:/app/vcpkg/installed/x64-windows/include
LIBS += -LD:/app/vcpkg/installed/x64-windows/lib -lhiredis
```

## ç¼–è¯‘ä¸è¿è¡Œ

### ç¯å¢ƒå‡†å¤‡

- å®‰è£… Qtï¼ˆæ¨è Qt 6.5.3ï¼‰
- å®‰è£… Qt Creator 
- å®‰è£… Redis å¹¶ä¿æŒè¿è¡Œï¼ˆæœ¬åœ°æˆ–è¿œç¨‹ï¼‰

### ç¼–è¯‘é¡¹ç›®

ä½¿ç”¨ Qt Creator æ‰“å¼€ `.pro` æ–‡ä»¶

### è¿è¡Œè¯´æ˜

1. å¯åŠ¨redis ä¸ MySQL æœåŠ¡
2. å¯åŠ¨æœåŠ¡å™¨ç¨‹åºï¼Œç›‘å¬ç«¯å£ï¼ˆé»˜è®¤ 12345ï¼‰
3. å¯åŠ¨å¤šä¸ªå®¢æˆ·ç«¯ï¼Œè¾“å…¥æœåŠ¡å™¨ IP å’Œç«¯å£è¿›è¡Œè¿æ¥
4. ç™»å½•åå³å¯èŠå¤©
